{% extends "acq/base.html" %}
{% load static %}
{% block title %}Modbus Maestro{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/mb_maestro.css' %}">
<div id="ventana">
  <p>
    <label for="encabezado">Configuraci√≥n Modbus Maestro</label>
  </p>
  <form action="" method="post">
    {% csrf_token %}
    <table>
      {% for field in form.visible_fields %}
      <tr>
        <td class="etiqueta">{{ field.label_tag }}</td>
        <td class="dato">{{ field }}</td>
      </tr>
      {% endfor %}
    </table>
    <button id="tk_modificar" type="submit" class="btn_control" name="guardar_en_bd">
      <img class="imagen" src="{% static " recursos/iconos/editar24x24.png" %}" />Guardar en BD</button>

    <a id="tk_regresar" href="{% url 'uacq:configuracion' %}" type="button" class="btn_control">
      <img class="imagen" src="{% static " recursos/iconos/atras24x24.png" %}" /> Regresar</a>

    <input id="guardarDisco" type="submit" formmethod="get" name="guardar_en_disco" class="btn_control"
      value="Guardar en Disco">
    </input>
  </form>

  <!-- Este form abre un dialog para cargar un archivo -->
  <form id="subir_configuracion" enctype="multipart/form-data" action="" method="post">
    {% csrf_token %}
    <!--{{ conf.as_table }}-->
    <dialog id="favDialog">
      <form method="dialog">
        <section>
          <table id="tablaconf">
            {% for field in conf.visible_fields %}
            <tr>
              <td class="etiqueta">{{ field.label_tag }}</td>
              <td class="dato">{{ field }}</td>
            </tr>
            {% endfor %}
          </table>
        </section>
        <menu>
          <button id="cancelar" class="btn_control" type="reset">Cancelar</button>
          <input id="tk_validar" type="submit" class="btn_control" name="cargar_archivo" value="Confirmar" />
        </menu>
      </form>
    </dialog>
    <button id="cargarArchivo" class="btn_control">Cargar Archivo</button>

    <script>
      (function () {
        var cargarArchivo = document.getElementById('cargarArchivo');
        var cancelButton = document.getElementById('cancelar');
        var favDialog = document.getElementById('favDialog');

        // Update button opens a modal dialog
        cargarArchivo.addEventListener('click', function () {
          favDialog.showModal();
        });

        // Form cancel button closes the dialog box
        cancelButton.addEventListener('click', function () {
          favDialog.close();
        });

      })();
    </script>
  </form>
</div>

</html>
<p> {{mensajes}} </p>
{% endblock %}